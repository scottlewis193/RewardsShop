<!DOCTYPE html>
<html lang="en">
 
<head>
    <meta charset="UTF-8">
    <title>TEST</title>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>
    <script src="https://unpkg.com/tweetnacl@1.0.3/nacl.js"></script>
    <script src="Base58.js"></script>

    <script type="text/javascript">
        
        async function transferSOL() {
      /*       //Changes are only here, in the beginning
            if (window.solana.isConnected === false){
                const resp = await window.solana.connect();
            }
            const pubKey = await window.solana.publicKey;
            console.log("Public Key: ", pubKey);     */ 
            
            var senderWalletKP = solanaWeb3.Keypair.fromSecretKey(new Uint8Array([139,244,70,246,122,195,63,252,175,25,113,23,168,45,124,107,73,79,6,195,70,53,217,77,63,10,89,239,214,127,194,200,188,75,117,9,71,46,114,241,250,90,45,82,34,169,198,50,203,241,21,59,97,25,58,56,249,245,78,62,181,92,33,135]))
            var senderWallet = new solanaWeb3.PublicKey("Dg2P9fQEisciotjK7W2sbWjjA7vdSfiRq34y14to8AtW");

            // Establishing connection
            const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl("devnet"));;
            alert('hello2');

            // I have hardcoded my secondary wallet address here. You can take this address either from user input or your DB or wherever
            var recieverWallet = new solanaWeb3.PublicKey("Dg2P9fQEisciotjK7W2sbWjjA7vdSfiRq34y14to8AtW");
            alert('hello3');

            // // Airdrop some SOL to the sender's wallet, so that it can handle the txn fee
            // var airdropSignature = await connection.requestAirdrop(
            //     senderWallet,
            //     solanaWeb3.LAMPORTS_PER_SOL,
            // );

            // // Confirming that the airdrop went through
            // await connection.confirmTransaction(airdropSignature);
            // console.log("Airdropped");

            var manualTransaction = new solanaWeb3.Transaction().add(
                solanaWeb3.SystemProgram.transfer({
                fromPubkey: senderWallet,
                toPubkey: recieverWallet,
                lamports: solanaWeb3.LAMPORTS_PER_SOL //Investing 1 SOL. Remember 1 Lamport = 10^-9 SOL.
                }),
            ); 

            // Send and confirm transaction
        const signature = await solanaWeb3.sendAndConfirmTransaction(connection, manualTransaction, [senderWalletKP])
        console.log('SIGNATURE', signature);
        console.log(Base58.encode(manualTransaction.signature))


 

            }
            
    </script>

</head>
<body onload="transferSOL()">

</body>